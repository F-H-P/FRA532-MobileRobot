<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from /home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/robots/vmegarover.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="vmegarover">
  <!-- =============== Link & Joint =============== -->
  <!-- Base -->
  <link name="base_footprint"/>
  <joint name="base_link_joint" type="fixed">
    <origin xyz="0 0 0"/>
    <parent link="base_footprint"/>
    <child link="base_link"/>
  </joint>
  <link name="base_link">
    <visual>
      <geometry>
        <mesh filename="/home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/models/vmegarover/meshes/dae/vmega_body.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="/home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/models/vmegarover/meshes/stl/vmega_body.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="-0.061 0 -0.002"/>
      <mass value="13.754"/>
      <inertia ixx="0.110655982" ixy="0" ixz="0" iyy="0.20062619" iyz="0" izz="0.269504336"/>
    </inertial>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <origin xyz="0 -0.14199 0.074742"/>
    <parent link="base_link"/>
    <child link="right_wheel_link"/>
    <axis xyz="0 1 0"/>
  </joint>
  <link name="right_wheel_link">
    <visual>
      <geometry>
        <mesh filename="/home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/models/vmegarover/meshes/dae/vmega_wheel.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.57079637 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.076"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="-1.57079637 0 0" xyz="0 0 0"/>
      <mass value="0.823"/>
      <inertia ixx="0.001250137" ixy="0" ixz="0" iyy="0.001250137" iyz="0" izz="0.0023768239999999996"/>
    </inertial>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <origin rpy="0 0 3.14159274" xyz="0 0.14199 0.074742"/>
    <parent link="base_link"/>
    <child link="left_wheel_link"/>
    <axis xyz="0 -1 0"/>
  </joint>
  <link name="left_wheel_link">
    <visual>
      <geometry>
        <mesh filename="/home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/models/vmegarover/meshes/dae/vmega_wheel.dae"/>
      </geometry>
    </visual>
    <collision>
      <origin rpy="-1.57079637 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.03" radius="0.076"/>
      </geometry>
    </collision>
    <inertial>
      <origin rpy="-1.57079637 0 0" xyz="0 0 0"/>
      <mass value="0.823"/>
      <inertia ixx="0.001250137" ixy="0" ixz="0" iyy="0.001250137" iyz="0" izz="0.0023768239999999996"/>
    </inertial>
  </link>
  <!-- Front LRF -->
  <!-- <xacro:lrf_v0 prefix="front" parent="base_link">
    <origin xyz="0.099 0 0.1015"/>
  </xacro:lrf_v0> -->
  <joint name="front_lrf_joint" type="fixed">
    <origin rpy="3.14159274 0 0" xyz="0.099 0 0.2155"/>
    <parent link="base_link"/>
    <child link="front_lrf_link"/>
  </joint>
  <link name="front_lrf_link">
    <visual>
      <geometry>
        <mesh filename="/home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/models/vmegarover/meshes/dae/lrf.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="/home/fhp/MobileRobot_ws/install/megarover_samples_ros2/share/megarover_samples_ros2/models/vmegarover/meshes/stl/lrf.stl"/>
      </geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0"/>
      <mass value="0.218"/>
      <inertia ixx="9.083333333333335e-05" ixy="0" ixz="0" iyy="0.00013443333333333334" iyz="0" izz="0.00013443333333333334"/>
    </inertial>
  </link>
  <!-- Rear LRF -->
  <!-- xacro:lrf_v0 prefix="rear" parent="base_link">
    <origin xyz="-0.289 0 0.1015"  rpy="0 0 ${M_PI}" />
  </xacro:lrf_v0 -->
  <link name="lrf_link"/>
  <joint name="lrf_link_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="lrf_link"/>
    <origin xyz="0.099 0 0.1015"/>
  </joint>
  <!-- use libgazebo_ros_diff_drive.so -->
  <gazebo>
    <plugin filename="libgazebo_ros_diff_drive.so" name="diff_drive_controller">
      <ros>
        <namespace>/vmegarover</namespace>
      </ros>
      <update_rate>50</update_rate>
      <left_joint>left_wheel_joint</left_joint>
      <right_joint>right_wheel_joint</right_joint>
      <wheel_separation>0.284</wheel_separation>
      <wheel_diameter>0.152</wheel_diameter>
      <publish_odom>true</publish_odom>
      <publish_odom_tf>true</publish_odom_tf>
      <odometry_frame>odom</odometry_frame>
      <robot_base_frame>base_footprint</robot_base_frame>
    </plugin>
  </gazebo>
  <gazebo reference="base_link">
    <selfCollide>false</selfCollide>
    <mu1 value="0.0"/>
    <mu2 value="0.0"/>
  </gazebo>
  <gazebo reference="right_wheel_link">
    <selfCollide>false</selfCollide>
    <mu1 value="1.0"/>
    <mu2 value="1.0"/>
  </gazebo>
  <gazebo reference="left_wheel_link">
    <selfCollide>false</selfCollide>
    <mu1 value="1.0"/>
    <mu2 value="1.0"/>
  </gazebo>
  <gazebo reference="front_lrf_link">
    <sensor name="front_lrf_sensor" type="ray">
      <pose>0 0 0 0 0 0</pose>
      <visualize>false</visualize>
      <update_rate>40</update_rate>
      <ray>
        <scan>
          <horizontal>
            <samples>1000</samples>
            <resolution>1</resolution>
            <min_angle>-3.14</min_angle>
            <max_angle>3.14</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.06</min>
          <max>10.0</max>
          <resolution>0.001</resolution>
        </range>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.03</stddev>
        </noise>
      </ray>
      <plugin filename="libgazebo_ros_ray_sensor.so" name="gazebo_ros_front_lrf_controller">
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <!-- <frame_name> ommited, will default to ${prefix}_lrf_link-->
        <frame_name>front_lrf_link</frame_name>
      </plugin>
    </sensor>
  </gazebo>
  <!-- xacro:lrf_gazebo_v0 prefix="rear"
                       min_rad="-1.57" max_rad="1.57"
                       min_range="0.06" max_range="10.0"/ -->
</robot>
